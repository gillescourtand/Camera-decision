# Camera-decision
Comprehensive method for selecting the right video acquisition equipment for your experimental setup

... work in progress ...

Below we outline some concepts that are critical for successful implementation of digital video recording.
The quality of video data, and therefore the results obtained from it, depends heavily on experimental conditions such as lighting, camera position, camera resolution, optical quality, background color, etc. The influence of these parameters on behavioral results has rarely been studied, and most researchers are unfamiliar with the variables to be taken into account and how to adjust them. It is also important to note that parameters such as resolution, frame rate, or encoding configuration can have an exponential impact on the computational cost of processing algorithms. 
Below we outline some concepts that are critical for successful implementation of digital video recording.

To obtain biometric behavioral data, digital video files have to be initially recorded. Digital video is spatial and temporal sampled frames presented in a sequence. The spatio-temporal sampling unit which is usually called pixel (picture element) can be represented by a digital value to describe its color and brightness. 
A good quality video is made up of images that are large enough to be clearly legible, sufficiently resolved to be precise, and sharp in both still and moving areas, with good contrast, while remaining rich in information. In other words, we need sufficient definition so that objects are made up of enough pixels to be well detected, good resolution so that we can distinguish the various elements making up the image, focus so as to avoid blurring in the area observed, and an exposure time adapted to the speed of movement likely to be recorded to avoid motion blur. It's also important to maintain a high dynamic range so that subtle textures and variations are preserved. Finally, we need to pay particular attention to the method used to encode the video file, and especially to the compression mode applied to reduce file size during storage.
The video acquisition system can be divided into four parts:
	- the camera (sensor + electronics)
	- the optical system that projects the image onto the sensor
	- the lighting
	- the software that controls the camera and encodes the video file

Camera Configuration Guidelines : Sensor resolution and Optics Choice
In the context of experimental laboratory systems, it is more convenient to use a camera connected to a computer, which will facilitate control, synchronization, and data storage. Modern industry USB cameras can be very good options for laboratories that are well versed in prototyping, programming, and software control layers. (The maximum length of a USB cable is 5 meters, however it is possible to exceed this limit by using a repeater, which can add an additional 5 meters.)

In order to choose the right camera from the plethora of options on the market, you need to ask yourself the right questions:
- How big is my experimental setup: how wide is the field I want to record?
- How far away can I set up the camera (space constraints, available space)?
- What's the max speed of the movements/behaviors I want to analyze?
- What lighting conditions do I need for my experiment?

The optical component plays the most important role in image quality and determines whether the entire scene can be captured. However, it cannot be chosen without taking into account the specific characteristics of the camera sensor (size, resolution, sensitivity).
Depth of field is greater on a small sensor, which is an advantage in video. A smaller sensor allows for smaller cameras that are easier to stabilize and generate less heat. Due to their physical properties, these sensors also transmit electrical signals more quickly, resulting in higher video frame rates. A small sensor therefore seems to be a reasonable choice, but in order for objects of interest to be correctly identified in the image, they must be made up of enough pixels, and for this, the number of pixels in the camera sensor must be taken into account. Resolution is determined by the number of photosites per unit area and ensures that objects in the image can be clearly distinguished. To achieve this, the lens associated with the sensor must be carefully chosen and its characteristics must correspond to both the size and number of pixels in the sensor.

When choosing a lens for your camera, it is essential to ensure that the optic is adapted to size of your sensor and that the resolution of the lens is compatible with the pixel size of the sensor. (Lens resolution is measured in line pairs per millimeter (lp/mm), which directly affects overall performance and image quality. Some guides are available to give lens resolution in line pairs per millimeter, and explain how to calculate their compatibility with your camera for optimum results but the sheer number of camera references and the diversity of sensor sizes, resolutions and sensitivities, as well as the constant evolution of technologies, make any attempt to describe the various combinations tedious and pointless. Serious manufacturers offer a configurator application which, based on the characteristics of your experimental set-up, allows you to define the characteristics of your acquisition system

To choose the most suitable camera and lens for the experimental setup, it is best to use the application offered by most suppliers on their websites.

<img width="1698" height="785" alt="Screenshot 2024-12-15 at 18-29-11 Lens Selector Basler AG" src="https://github.com/user-attachments/assets/b72728e4-c7d8-46a4-8b3e-5dd44a52bec0" />
(Lens Selector Basler AG : https://www.baslerweb.com/fr-fr/tools/lens-selector/)

It's important to understand that each digital video file is characterized by a specific resolution. This corresponds to the number of pixels used to define an area in the actual scene, and depends on the total number of pixels in the camera sensor. Most modern digital cameras can record in high‐definition (HD; 1920 × 1080 pixels) or even ultrahigh‐definition (UHD; 3840 × 2160 pixels) resolution. The higher the resolution of the camera sensor, the higher the effective pixel quantity that is available per animal. The majority of analysis systems recommend a minimum value of pixels (px) to be allocated to each animal for accuracy of detection. In our case, for freezing analysis the number of pixels describing the animal must sufficient to distinguish pixel intensity variation due to noise or light variation or due to animal movement. Freezing Point require an approximately 2000‐px area for an accurate freezing detection. Thus, it follows that increasing the resolution of the camera increases the number of pixels describing the animal but this accuracy can become problematic to define a freezing thresholding depending the amount of movement we want to measure.

## Frame Rate and Exposure Time Trade‑offs
A very important part of the acquisition system that should guide your choice is the ability to customize essential settings such as exposure time and frame rate. To correctly describe behavior or movement, we need to acquire images at an appropriate sampling rate, known as frame rate. This parameter denotes the number of still frames acquired per second. Hence, it is often referred to in the camera settings as the frames per second (fps) parameter. A video comprising a frame rate of thirty frames per second looks fairly smooth enough for most purposes. Another critical parameter for quality acquisition is exposure time, which determines image sharpness and the amount of light reaching the sensor. This corresponds to the shutter speed of the camera. It is this parameter, adapted to the maximum speed of the events observed, that will allow the animal to remain in focus and its behavior identifiable regardless of its attitude.
The parameters of frame rate and exposure time are therefore interdependent: frame rate defines the level of motion sampling, exposure time defines motion sharpness. It's easy to understand that the accurate description of fast motion will require many frames per second and a short exposure time. Lighting must therefore be adapted accordingly to obtain sufficiently bright images. We therefore have three key parameters: frame rate, exposure time and amount of light, for which we need to find the best compromise.
[...]

## Compression Strategies
The last point concerning the quality of the video file is the recording format. This is an often overlooked but critically important factor, whether for file playback, file size, or, most importantly, the quality of the recorded information. Because raw high-resolution video sequences consume large amounts of digital storage, data are often compressed using a range of available compression and decompression algorithms: “codecs.” Examples include H.264, MPEG, and ProRes. Based on selecting different camera settings, the compression can be performed to different standards that include selection of codecs as well as file digital containers (the “format” AVI, MP4, MKV, MOV...), which is how the file will be “packaged” with certain metadata and can be identified by different software. Video compression reduces file size by removing redundant information and using lossy techniques to approximate the original content. Compression algorithms often smooth out details, which can obscure small movements. Artifacts introduced by compression can also mislead tracking algorithms, resulting in inaccuracies
[…]
